= MQTT가 IoT에 적합한 이유

== 1. MQTT란 무엇인가?

**MQTT**(Message Queuing Telemetry Transport)는 **경량의 메시지 전송 프로토콜**로, 주로 **저전력, 대역폭이 제한된 환경에서 통신**하는 IoT(Internet of Things) 애플리케이션에 사용됩니다. MQTT는 **발행-구독 (Publish-Subscribe)** 기반의 통신 모델을 사용하며, 이는 클라이언트들이 메시지를 발행하고 구독하는 방식으로 데이터를 주고받을 수 있게 합니다.

MQTT는 1999년에 IBM에서 개발되었으며, IoT와 M2M(Machine-to-Machine) 통신에서 널리 사용됩니다. MQTT는 클라이언트 간에 데이터를 직접 주고받는 것이 아니라, **브로커(Broker)**를 통해 메시지를 라우팅하는 방식으로 동작합니다. 이 방식은 매우 효율적이며, 저전력 장치가 네트워크 리소스를 최소한으로 사용하면서 실시간 데이터를 송수신하는 데 적합합니다.

---

== 2. MQTT의 주요 개념

=== 2.1 **발행-구독(Publish-Subscribe) 모델**
MQTT는 **발행-구독 모델**을 사용합니다. 이는 **클라이언트(Client)**와 **브로커(Broker)**라는 두 가지 핵심 요소로 구성됩니다.

* **발행자 (Publisher)**: 데이터를 생성하고 이를 **브로커**로 전송하는 역할을 합니다. 발행자는 메시지를 특정 **주제(Topic)**에 발행합니다.

* **구독자 (Subscriber)**: 특정 주제에 관심이 있는 클라이언트로, 이 주제에 대해 브로커로부터 메시지를 받습니다. 구독자는 미리 특정 주제를 구독하고, 해당 주제에 새로운 메시지가 발행될 때마다 알림을 받습니다.

* **브로커 (Broker)**: 클라이언트 간의 메시지 중계를 담당하는 서버입니다. 브로커는 발행된 메시지를 관리하며, 구독자들에게 올바르게 메시지를 전달하는 역할을 합니다.

**예시**:

* **발행자**: 온도 센서가 **home/livingroom/temperature**라는 주제에 현재 온도를 발행합니다.
* **구독자**: 스마트폰 앱이 **home/livingroom/temperature** 주제를 구독하고, 새로운 온도 데이터를 받을 때마다 업데이트합니다.
* **브로커**: MQTT 브로커가 발행된 메시지를 받아 구독자에게 전달합니다.

=== 2.2 **주제 (Topic)**
MQTT에서 **주제(Topic)**는 메시지가 전달되는 경로를 정의하는 문자열입니다. 주제는 계층 구조로 나누어질 수 있으며, 슬래시(**/**)로 구분됩니다. 예를 들어, **home/livingroom/temperature**라는 주제는 집 안의 거실에서 측정된 온도를 나타냅니다.

주제의 계층 구조는 데이터를 효율적으로 분류하고, 필요한 클라이언트만 특정 데이터를 수신하도록 설정할 수 있습니다.

=== 2.3 **품질 수준 (QoS - Quality of Service)**
MQTT는 메시지 전송의 신뢰성을 보장하기 위해 **QoS (Quality of Service)**라는 기능을 제공합니다. QoS는 메시지 전송의 성공 여부와 전송 횟수를 정의하며, 세 가지 레벨로 나뉩니다:

* **QoS 0 (At most once)**: 메시지가 한 번 전송되며, 성공 여부에 대한 확인을 받지 않습니다. 데이터가 손실될 수 있습니다.
* **QoS 1 (At least once)**: 메시지가 적어도 한 번 이상 전송되며, 브로커로부터 수신 확인을 받습니다. 중복 메시지가 발생할 수 있습니다.
* **QoS 2 (Exactly once)**: 메시지가 정확히 한 번 전송되고, 중복 없이 전달됩니다. 가장 높은 수준의 신뢰성을 보장하지만, 통신 오버헤드가 증가합니다.

=== 2.4 **지속성 (Retained Messages)**
MQTT는 메시지를 발행할 때 **Retained Message** 옵션을 사용할 수 있습니다. 이는 새로운 구독자가 구독을 시작할 때, 가장 최근에 발행된 메시지를 즉시 받을 수 있게 합니다. 이 기능은 IoT 환경에서 디바이스 상태와 같은 정보를 구독자에게 빠르게 전달하는 데 유용합니다.

---

== 3. MQTT가 IoT에 적합한 이유

MQTT는 **저전력, 신뢰성, 유연성** 등의 장점 덕분에 IoT 환경에서 매우 적합한 프로토콜입니다. 아래에서 그 이유를 자세히 살펴보겠습니다.

== 3.1 **경량성 (Lightweight)**

MQTT는 매우 가벼운 프로토콜로 설계되었습니다. 헤더의 크기가 작고, 프로토콜의 복잡성이 낮기 때문에 **대역폭이 제한된 네트워크**에서도 효율적으로 통신할 수 있습니다. 이는 배터리로 구동되는 소형 IoT 장치들이 네트워크 리소스를 최소한으로 사용하면서도 장기간 통신을 유지할 수 있게 합니다.

예를 들어, 스마트 농업에서 센서들이 데이터를 1시간마다 전송하는 경우, MQTT는 데이터 전송 시 필요한 리소스를 줄여 배터리 수명을 연장할 수 있습니다.

== 3.2 **저전력 소비 (Low Power Consumption)**

MQTT는 IoT 장치의 **전력 소모를 최소화**할 수 있도록 설계되었습니다. 발행-구독 모델은 장치가 데이터를 발행하거나 구독할 때만 활성화되며, **유휴 상태**에서는 전력 소모를 거의 하지 않습니다. 특히 배터리로 구동되는 센서나 디바이스의 경우, 전력 효율은 매우 중요한 요소입니다.

== 3.3 **비연결성 (Connectionless Operation)**

MQTT는 연결이 불안정하거나, 일시적으로 연결이 끊길 수 있는 환경에서 잘 작동합니다. IoT 장치가 인터넷에 항상 연결되지 않아도 메시지가 손실되지 않고 다시 연결되면 수신될 수 있습니다. 이러한 특성은 **저대역폭 네트워크**나 **간헐적인 연결성**을 가진 환경에 매우 적합합니다.

== 3.4 **유연한 전송 품질 (QoS - Quality of Service)**

MQTT는 QoS 레벨을 통해 메시지 전송의 신뢰성을 설정할 수 있습니다. IoT 환경에서 데이터 손실이 허용되는 경우(예: 환경 센서에서 전송하는 정보)에는 낮은 QoS(0)을 사용할 수 있고, 중요한 데이터(예: 보안 시스템 알림)에는 높은 QoS(2)를 설정하여 메시지 손실을 방지할 수 있습니다. 이는 네트워크 상황에 따라 전송 품질을 조절할 수 있어 유연한 통신이 가능합니다.

== 3.5 **발행-구독 모델의 확장성 (Scalability)**

MQTT는 **발행-구독 모델**을 사용하기 때문에 확장성이 매우 뛰어납니다. 다수의 클라이언트가 하나의 주제를 구독할 수 있고, 여러 디바이스가 동일한 주제에 데이터를 발행할 수 있습니다. 따라서 수천 개의 IoT 장치가 동시에 통신하더라도 브로커를 통해 데이터를 효율적으로 관리할 수 있습니다. 이는 대규모 IoT 네트워크에서 매우 중요한 요소입니다.

== 3.6 **네트워크 제약을 고려한 통신 방식**

MQTT는 네트워크 리소스를 효율적으로 사용하기 위해 네트워크 상황에 맞춰 적절히 동작합니다. **대역폭이 매우 낮거나 네트워크 지연이 큰 상황**에서도 데이터 전송이 가능하며, 메시지를 지속적으로 큐에 저장해 두었다가 네트워크가 복구되면 전송할 수 있습니다. 이는 LoRaWAN과 같은 저전력 광역 네트워크(LPWAN)에서도 MQTT가 널리 사용되는 이유 중 하나입니다.

== 3.7 **보안성 (Security)**

MQTT는 **TLS(Transport Layer Security)**를 사용하여 통신 보안을 지원합니다. MQTT 브로커와 클라이언트 간의 메시지를 암호화하여 데이터 유출을 방지할 수 있으며, 인증 절차를 통해서도 장치 간의 안전한 통신을 보장할 수 있습니다. 이로 인해 산업용 IoT, 스마트 홈, 헬스케어 등의 민감한 데이터를 다루는 환경에서도 사용될 수 있습니다.

---

== 4. **MQTT 활용 사례**

1. **스마트 홈**: 온도 조절기, 조명 제어기, 보안 카메라 등 다양한 IoT 기기가 MQTT를 사용하여 중앙 서버(브로커)로 데이터를 전송하고, 앱을 통해 관리됩니다.

2. **스마트 농업**: 농장에서 사용하는 센서들이 MQTT를 통해 토양 수분, 온도, 습도 데이터를 전송하고, 이를 기반으로 관개 시스템이 자동으로 작동할 수 있습니다.

3. **산업 IoT**: 공장의 기계 상태 모니터링, 원격 유지보수 등에서 MQTT를 사용해 실시간 데이터를 수집하고 분석할 수 있습니다.

4. **헬스케어**: 웨어러블 기기와 병원 시스템이 MQTT

를 사용해 환자의 데이터를 실시간으로 주고받아, 환자의 건강 상태를 모니터링하고, 필요 시 즉각적으로 조치를 취할 수 있습니다.

== 5. **정리**

* **MQTT**는 IoT 환경에 최적화된 경량의 메시지 전송 프로토콜로, **저전력, 대역폭 제약, 불안정한 네트워크 환경**에서도 안정적으로 동작할 수 있도록 설계되었습니다.
* **발행-구독 모델**을 기반으로 하여 확장성이 뛰어나며, **QoS**를 통해 다양한 신뢰성 수준에서 메시지를 전송할 수 있습니다.
* 이 모든 특성은 **스마트 홈, 산업 IoT, 헬스케어**와 같은 다양한 IoT 애플리케이션에서 MQTT가 널리 사용되는 이유입니다.

---

[cols="1a,1a,1a",grid=none,frame=none]
|===
<s|
^s|link:../../README.md[목차]
>s|
|===