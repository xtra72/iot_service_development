= Grafana란 무엇인가?

**Grafana**는 **데이터 시각화 및 모니터링 도구**로, 다양한 데이터 소스를 연결하여 데이터를 시각적으로 표현하고 분석할 수 있는 **오픈소스 소프트웨어**입니다. Grafana는 **대시보드** 형식으로 데이터를 실시간으로 모니터링하고, 직관적인 그래프와 차트를 통해 데이터의 변화를 파악할 수 있게 해줍니다.

주로 **시계열 데이터**의 시각화 및 모니터링에 사용되며, 시스템 모니터링, 성능 분석, IoT 애플리케이션, DevOps 등에서 널리 활용됩니다. Grafana는 다양한 데이터 소스와 쉽게 연동할 수 있으며, 대표적인 데이터 소스로는 **InfluxDB**, **Prometheus**, **Elasticsearch**, **MySQL**, **PostgreSQL** 등이 있습니다.

== Grafana의 주요 기능

* **대시보드**: 사용자가 원하는 대로 커스터마이즈할 수 있는 대시보드를 통해, 여러 데이터를 한 곳에서 모니터링할 수 있습니다.
* **실시간 모니터링**: 실시간으로 데이터를 시각화하고, 대시보드에서 데이터를 모니터링할 수 있습니다.
* **알림 시스템**: 특정 조건이 충족되었을 때 경고나 알림을 설정하여, 시스템 상태를 실시간으로 감시하고 이상 발생 시 즉각적으로 대응할 수 있습니다.
* **다양한 시각화 옵션**: 선 그래프, 막대 그래프, 히트맵, 게이지 등 다양한 차트 형식으로 데이터를 시각화할 수 있습니다.
* **다양한 데이터 소스 지원**: 여러 종류의 데이터 소스와 연동하여 데이터를 동시에 시각화할 수 있습니다.

---

== Grafana와 InfluxDB 연동을 통한 데이터 시각화

**InfluxDB**는 주로 **시계열 데이터**를 저장하고 처리하는 데 사용되며, **Grafana**는 이 데이터를 시각적으로 표현하고 모니터링하는 데 적합한 도구입니다. Grafana는 InfluxDB와 쉽게 연동하여 실시간으로 데이터를 시각화할 수 있습니다.

다음은 **Grafana와 InfluxDB를 연동하여 데이터 시각화**하는 방법을 단계별로 설명합니다.

---

== 1. Grafana 설치

먼저 **Grafana**를 설치해야 합니다. Grafana는 다양한 운영 체제에서 지원되며, 여기서는 **Ubuntu**를 예시로 설명합니다.

== 1.1 Grafana 설치 (Ubuntu 예시)

```bash
sudo apt update
sudo apt install -y grafana
```

설치 후 Grafana 서비스를 시작하고, 부팅 시 자동으로 시작되도록 설정합니다.

```bash
sudo systemctl start grafana-server
sudo systemctl enable grafana-server
```

== 1.2 웹 브라우저에서 Grafana 접속

Grafana가 설치되면 웹 브라우저에서 Grafana 대시보드에 접근할 수 있습니다.

1. 브라우저에서 **`http://localhost:3000`**으로 접속합니다. (원격 서버의 경우 서버의 IP 주소로 접속)
2. 기본 로그인 정보는 다음과 같습니다:
* **사용자 이름**: `admin`
* **비밀번호**: `admin`

최초 로그인 시 비밀번호를 변경하라는 메시지가 나타나면, 새로운 비밀번호를 설정합니다.

---

== 2. Grafana에서 InfluxDB 데이터 소스 추가

InfluxDB에서 데이터를 시각화하려면, 먼저 Grafana에서 InfluxDB를 **데이터 소스**로 추가해야 합니다.

== 2.1 데이터 소스 추가

1. **데이터 소스 메뉴로 이동**: Grafana 대시보드의 왼쪽 메뉴에서 톱니바퀴 모양의 **설정 아이콘**을 클릭하고, **Data Sources**를 선택합니다.

2. **InfluxDB 추가**: "Add data source" 버튼을 클릭하고, 데이터 소스 목록에서 **InfluxDB**를 선택합니다.

== 2.2 InfluxDB 연결 설정

InfluxDB를 데이터 소스로 추가하기 위해, 다음 설정을 입력해야 합니다.

* **URL**: InfluxDB 서버의 URL을 입력합니다. 로컬에서 실행 중인 InfluxDB의 경우 **`http://localhost:8086`**을 입력합니다.
* **Database**: Grafana에서 사용할 InfluxDB의 데이터베이스 이름을 입력합니다. 예를 들어, Telegraf가 수집한 데이터를 저장하는 데이터베이스가 **`telegraf`**일 경우, 이 이름을 입력합니다.
* **User** 및 **Password**: InfluxDB에서 데이터를 조회할 권한이 있는 사용자의 계정 정보입니다. InfluxDB에 미리 생성된 사용자 계정 정보를 입력합니다.
* **HTTP Method**: 기본적으로 **GET** 방식을 사용합니다. 필요에 따라 POST로 변경할 수도 있지만, 기본 설정을 유지하는 것이 일반적입니다.

모든 설정을 입력한 후, **"Save & Test"** 버튼을 클릭하여 InfluxDB 연결이 성공적으로 설정되었는지 확인합니다.

---

== 3. 대시보드 생성 및 데이터 시각화

== 3.1 대시보드 생성

InfluxDB와의 연동이 성공하면, 이제 Grafana에서 대시보드를 생성하고 데이터를 시각화할 수 있습니다.

1. **대시보드 생성**: Grafana 대시보드에서 **+** 버튼을 클릭하고, **Create Dashboard**를 선택합니다.
2. **패널 추가**: "Add a new panel"을 클릭하여 새로운 패널을 추가합니다. 이 패널에서 InfluxDB 데이터를 시각화하게 됩니다.

== 3.2 쿼리 작성

패널을 추가한 후, InfluxDB에서 데이터를 가져오기 위한 **쿼리**를 작성합니다. Grafana는 InfluxDB의 **InfluxQL** 또는 **Flux** 쿼리 언어를 사용하여 데이터를 조회합니다.

* **쿼리 편집기**에서 **InfluxDB**를 선택하고, 데이터를 조회할 수 있는 **쿼리**를 입력합니다.

  예를 들어, CPU 사용률 데이터를 시각화하려면 다음과 같은 쿼리를 입력할 수 있습니다:

  ```sql
  SELECT mean("usage_system") FROM "cpu" WHERE $timeFilter GROUP BY time($interval)
  ```

  위 쿼리는 CPU 사용률 데이터를 시간 필터에 맞게 평균값으로 그룹화하여 가져오는 쿼리입니다.

== 3.3 시각화 옵션 설정

쿼리로 데이터를 불러온 후, 해당 데이터를 시각적으로 표현할 차트 형식을 선택할 수 있습니다. Grafana는 다양한 시각화 옵션을 제공하며, 그 중 몇 가지 주요 옵션은 다음과 같습니다:

* **Line Graph**: 시간에 따른 데이터 변화를 시각화할 때 사용되는 기본적인 그래프 형식.
* **Bar Chart**: 특정 범위의 데이터를 막대 그래프 형식으로 시각화.
* **Gauge**: 실시간 상태를 나타내는 데 사용되는 게이지 차트.
* **Heatmap**: 대량의 데이터를 색상으로 표현하여 데이터 분포를 시각화.

시각화 형식을 선택한 후, 패널에서 필요한 추가 설정(예: 축, 범례, 색상 등)을 조정하여 대시보드를 완성합니다.

== 3.4 대시보드 저장

데이터 시각화가 완료되면, 대시보드를 저장할 수 있습니다.

1. **대시보드 상단 메뉴에서 "Save" 버튼**을 클릭하여 대시보드를 저장합니다.
2. 대시보드 이름을 지정하고, 필요한 경우 설명을 추가합니다.

저장된 대시보드는 언제든지 다시 열어 실시간 데이터를 모니터링할 수 있으며, 여러 패널을 추가해 복잡한 시스템의 다양한 데이터를 한 곳에서 모니터링할 수 있습니다.

---

== 4. Grafana 알림 설정

Grafana는 특정 조건이 충족되었을 때 **알림**을 보내는 기능도 제공합니다. 이를 통해 시스템에 이상이 발생했을 때 즉각적인 대응이 가능합니다.

== 4.1 알림 채널 설정

먼저 알림을 전송할 **알림 채널**을 설정해야 합니다. Grafana는 **이메일**, **Slack**, **Webhook** 등 다양한 알림 채널을 지원합니다.

1. **알림 채널 설정**: Grafana 대시보드의 설정 메뉴에서 **Notification Channels**로 이동합니다.
2. **새 알림 채널 추가**: "Add channel" 버튼을 클릭하고, 알림 채널을 구성합니다.
* **Name**: 알림 채널의 이름을 지정합니다.
* **Type**: 사용할 알림 채널의 유형을 선택합니다 (예: Email, Slack 등).
* **Settings**: 선택한 알림 유형에 맞게 설정을 완료합니다 (예: 이메일 주소, Slack Webhook URL 등).

== 4.2 알림 조건 설정

알림 채널이 설정되면, 특정 조건이 충족되었을 때 알림을 보내도록 대시보드에 **알림 규칙**을 추가할 수 있습니다.

1. 대시보드의 패널 설정에서 **Alert** 탭으로 이동

합니다.
2. **새 알림 규칙 추가**: 알림을 발생시킬 조건을 설정합니다 (예: CPU 사용률이 80%를 초과할 경우).
3. 알림이 발생했을 때 사용할 **알림 채널**을 선택합니다.

알림 규칙이 설정되면, 조건이 충족되었을 때 알림 채널을 통해 경고 메시지가 전송됩니다.

---

== 결론

**Grafana**는 강력한 **데이터 시각화 및 모니터링 도구**로, **InfluxDB**와의 연동을 통해 실시간 시계열 데이터를 시각화하고 모니터링할 수 있습니다. **InfluxDB**는 IoT 시스템, 서버 모니터링, 성능 분석 등에서 수집된 대량의 데이터를 처리하며, Grafana는 이를 직관적으로 시각화하고, 실시간 모니터링과 경고 시스템을 구축하는 데 최적화되어 있습니다.

**InfluxDB**와 **Grafana**를 함께 사용하면, 데이터의 흐름과 상태를 실시간으로 파악하고, 시스템 이상 징후를 빠르게 감지하며 대응할 수 있는 **완전한 모니터링 솔루션**을 구축할 수 있습니다.

---

[cols="1a,1a,1a",grid=none,frame=none]
|===
<s|
^s|link:../../../README.md[목차]
>s|
|===