= 네트워크 계층 (Network Layer)

IoT 서비스 아키텍처의 **네트워크 계층**은 IoT 장치가 수집한 데이터를 상위 계층으로 전송하고, 중앙 시스템의 제어 명령을 IoT 장치로 전달하는 중간 역할을 합니다. 이 계층은 다양한 통신 기술과 프로토콜을 통해 장치 간 연결성과 데이터 전송을 가능하게 합니다. **네트워크 계층**은 IoT 아키텍처에서 실시간 데이터 흐름과 서비스의 신뢰성을 보장하는 중요한 역할을 합니다.

== 1. 네트워크 계층의 주요 역할
* **데이터 전송**: 네트워크 계층은 IoT 장치에서 수집된 데이터를 중앙 서버, 클라우드, 또는 엣지 컴퓨팅 장치로 전송합니다. 이때 데이터를 빠르고 안정적으로 전달하는 것이 핵심 목표입니다.
* **명령 전달**: 상위 계층에서 IoT 장치에 제어 명령을 보낼 수 있도록 데이터를 역방향으로 전달하는 역할도 수행합니다.
* **중계 및 게이트웨이 역할**: IoT 장치와 클라우드 또는 서버 사이에서 데이터를 중계하거나, 네트워크 안정성을 위한 임시 저장소 역할을 합니다.

== 2. 네트워크 계층에서 사용되는 주요 통신 기술 및 프로토콜

IoT 환경에서는 장치의 위치, 전송 거리, 전력 소모, 데이터 전송 속도에 따라 적합한 네트워크 기술과 프로토콜을 선택합니다.

아래는 IoT에서 주로 사용되는 통신 기술과 프로토콜입니다.

=== 2.1 근거리 통신 기술

* **Wi-Fi**: 주로 스마트홈 기기에서 널리 사용되며, 실내 환경에서 높은 전송 속도를 제공합니다. 하지만 전력 소모가 크기 때문에 배터리 기반의 IoT 장치보다는 전원에 연결된 장치에 적합합니다.

* **Bluetooth 및 BLE (Bluetooth Low Energy)**: 저전력으로 짧은 거리에서 데이터를 전송할 때 유용하며, 웨어러블 기기, 스마트홈 기기에서 많이 사용됩니다. BLE는 특히 저전력 소모가 중요한 장치에서 많이 활용됩니다.

* **ZigBee**: 주로 스마트홈 자동화, 산업용 IoT에 사용되는 저전력 무선 통신 프로토콜입니다. 짧은 거리에서 많은 장치를 네트워크에 연결할 수 있는 메쉬 네트워크 기능을 제공하여, 다양한 IoT 환경에 적합합니다.

=== 2.2 중거리 통신 기술

* **셀룰러 네트워크 (LTE-M, NB-IoT)**: 광범위한 커버리지를 제공하여 스마트 시티, 스마트 농업 등 대규모 IoT 프로젝트에 사용됩니다. NB-IoT는 배터리 효율이 뛰어나고 유지보수가 적어야 하는 원격지 장치에 적합하며, LTE-M은 더 높은 데이터 전송 속도가 필요할 때 활용됩니다.

* **LPWAN (Low Power Wide Area Network)**: 저전력으로 광범위한 커버리지를 제공하여 스마트 시티, 농업 등 대규모 IoT 애플리케이션에 유용합니다.
** **LoRaWAN**: 장거리 통신이 가능하며, 저전력 소모로 인해 원격 지역에서의 센서 네트워크 구축에 유리합니다.
** **Sigfox**: 매우 적은 전력으로 데이터를 전송할 수 있어 배터리 수명이 중요한 IoT 장치에서 사용되며, LoRaWAN과 유사한 특성을 가집니다.

=== 2.3 장거리 통신 기술
* **5G**: 초고속, 초저지연의 통신을 제공하여 실시간 데이터 처리가 중요한 자율주행차, 스마트 시티, 원격 의료 등의 IoT 애플리케이션에서 중요한 역할을 합니다. 기존 네트워크 대비 장치 간의 빠른 데이터 교환이 가능하며, 대규모 기기 연결이 가능한 특성을 가지고 있습니다.
* **위성 통신**: 위성 기반 네트워크를 통해 IoT 데이터를 전송하며, 광범위한 지역에서의 실시간 데이터 전송이 필요한 IoT 애플리케이션에서 사용됩니다. 특히, 원격 지역의 농업이나 해양 모니터링에서 유용하게 활용됩니다.

== 3. 네트워크 계층의 아키텍처 및 구성 요소

* **메쉬 네트워크 (Mesh Network)**: ZigBee와 같은 메쉬 네트워크는 노드 간 연결성을 강화하고 신호 범위를 확장하는 데 유리합니다. 하나의 노드가 실패해도 다른 경로를 통해 데이터를 전달할 수 있어 신뢰성을 높입니다.

* **게이트웨이 장치 (Gateway Device)**: IoT 장치와 클라우드 또는 서버 간의 데이터 전송을 중계하며, 네트워크 연결이 불안정한 경우 데이터를 임시로 저장하고 전송을 재시도하는 역할을 합니다. 게이트웨이는 또한 데이터를 필터링하거나 일부 사전 처리를 통해 데이터 양을 줄이는 데 사용됩니다.

* **프로토콜 변환기**: IoT 시스템에서 다양한 통신 프로토콜이 사용되므로, 서로 다른 프로토콜을 변환하는 역할을 수행하는 장치가 필요할 수 있습니다. 예를 들어, Modbus에서 MQTT로 프로토콜을 변환하여 데이터를 전송할 수 있습니다.

== 4. 네트워크 계층의 주요 특징

* **저전력 소비**: IoT 장치들이 배터리로 작동하기 때문에, 네트워크 계층에서 사용하는 통신 기술은 저전력 소모를 고려해야 합니다. LPWAN, ZigBee, BLE 등 저전력 통신 프로토콜이 이에 적합합니다.

* **데이터 전송 지연 최소화**: 실시간 데이터 처리가 중요한 IoT 응용 분야에서는 데이터 전송 지연을 최소화하는 것이 필수적입니다. 예를 들어, 자율주행차나 원격 의료 시스템에서는 5G와 같은 초저지연 네트워크가 필요합니다.

* **높은 보안성**: 네트워크 계층은 데이터가 외부로 전송되는 구간이므로 보안이 중요합니다. 데이터를 암호화하여 무단 접근을 방지하고, 신뢰할 수 있는 네트워크 연결을 유지하는 것이 필요합니다.

* **확장성**: IoT 네트워크에 연결된 장치의 수가 증가하더라도, 성능 저하 없이 안정적인 네트워크 연결을 유지할 수 있어야 합니다. 예를 들어, ZigBee 메쉬 네트워크는 대규모 네트워크 구축에 적합합니다.

== 5. 네트워크 계층의 동작 방식

* **1단계: 데이터 수집 및 초기 전송**
     장치 계층에서 수집된 데이터는 센서에서 게이트웨이로 전달됩니다. 이때 필요한 경우 프로토콜 변환이 이루어지며, 데이터가 클라우드나 서버로 전송될 준비가 됩니다.

* **2단계: 중계 및 필터링**
     네트워크 계층의 게이트웨이에서 데이터를 중계하거나, 필요한 경우 일부 데이터를 필터링하여 데이터 전송을 최적화합니다. 엣지 컴퓨팅을 활용할 경우, 게이트웨이에서 데이터를 간단히 처리할 수도 있습니다.

* **3단계: 서버 전송 및 명령 수신**
     게이트웨이는 데이터를 클라우드 서버로 전달하고, 클라우드에서 분석된 결과가 있을 경우 이를 다시 장치 계층으로 전달합니다. 이때, 네트워크 계층은 양방향 데이터 흐름을 지원하여, 서버의 제어 명령을 장치에 전달할 수 있도록 합니다.

== 6. 정리

* 네트워크 계층은 IoT 서비스의 데이터 흐름과 제어를 가능하게 하며, 효율적인 데이터 전송, 보안 유지, 저전력 소비, 확장성을 고려하여 설계됩니다.
* IoT 서비스의 성능과 안정성은 네트워크 계층의 신뢰성에 크게 의존하므로, 사용 환경과 요구사항에 맞는 통신 기술과 아키텍처를 선택하는 것이 중요합니다.

---

[cols="1a,1a,1a",grid=none,frame=none]
|===
<s|
^s|link:../../README.md[목차]
>s|
|===