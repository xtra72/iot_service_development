= LoRaWAN

== 1. LoRaWAN이란 무엇인가?

**LoRaWAN**(Long Range Wide Area Network)은 **저전력, 장거리 통신**을 지원하는 무선 통신 프로토콜로, 주로 IoT(사물 인터넷) 장치 간의 통신에 사용됩니다. LoRaWAN은 **LoRa**(Long Range) 기술을 기반으로 동작하며, 센서 및 디바이스에서 데이터를 수집하고 이를 게이트웨이, 서버로 전송하는 역할을 합니다.

LoRaWAN은 특히 **배터리로 구동되는 저전력 장치**에서 장거리 통신을 가능하게 하여, 넓은 지역에 분산된 IoT 장치들 간의 네트워크 구축에 적합합니다. 이 기술은 스마트 농업, 스마트 시티, 산업 자동화 등 다양한 IoT 애플리케이션에서 사용됩니다.

=== **LoRa vs LoRaWAN**

* **LoRa**: 물리 계층에서의 무선 통신 기술을 의미합니다. LoRa는 Chirp Spread Spectrum(CSS)이라는 기술을 사용하여 장거리에서 데이터를 전송하면서도 저전력 소비를 가능하게 합니다. 주로 센서 데이터 전송에 사용됩니다.

* **LoRaWAN**: LoRa가 물리적 데이터 전송을 담당하는 반면, LoRaWAN은 **네트워크 프로토콜**로, LoRa 기술을 통해 데이터를 전송하는 디바이스와 중앙 서버 간의 통신 규칙을 정의합니다. LoRaWAN은 네트워크 계층에서의 통신을 관리하고, 여러 장치들이 데이터를 효과적으로 주고받을 수 있도록 지원합니다.

== 2. LoRaWAN의 주요 특징

=== 2.1 주파수 대역 (Frequency Bands)

LoRaWAN은 **비면허 ISM 주파수 대역**을 사용하여 다양한 지역에서 활용할 수 있습니다. 주파수 대역은 지역별로 상이할 수 있으며, 전송 거리와 대역폭을 조정하는 데 사용됩니다​.

주요 주파수 대역은 다음과 같습니다:

* 한국(KR): 920MHz
* 유럽(EU): 868MHz
* 북미(US): 915MHz

=== 2.2 변조 방식 (Modulation)

LoRaWAN의 물리 계층에서 사용되는 LoRa는 Chirp Spread Spectrum(CSS) 변조 방식을 기반으로 하며, **다양한 스프레딩 팩터(SF7~SF12)**를 통해 통신 거리를 조정할 수 있습니다. 스프레딩 팩터가 높을수록 통신 거리가 길어지지만, 데이터 전송 속도는 느려집니다. 이는 전송 거리와 속도 간의 절충(trade-off)을 허용하여 네트워크 최적화를 돕습니다​.

=== 2.3 데이터 속도 (Data Rate)

LoRaWAN은 적응형 데이터 속도(ADR) 기능을 지원하여 네트워크 환경에 따라 동적으로 데이터 전송 속도를 조절합니다. 데이터 전송 속도는 사용된 스프레딩 팩터와 대역폭에 따라 다르며, 일반적으로 0.3kbps에서 50kbps 사이입니다. 이는 저전력 환경에서 장거리 통신을 가능하게 하며, 긴 배터리 수명을 보장합니다​.

=== 2.4 전송 거리 (Range)

LoRaWAN은 도시 환경에서 최대 3~5km, 농촌 지역에서 최대 15km 이상의 통신 거리를 지원합니다. 주파수 대역과 스프레딩 팩터에 따라 실제 통신 거리는 달라질 수 있지만, 다른 무선 통신 기술에 비해 매우 넓은 범위를 커버할 수 있는 것이 특징입니다​.

==== 무선 통신 기술간 통신 거리

1. **BLE (Bluetooth Low Energy)**
** **전송 거리**: 약 10m ~ 100m(단거리 통신에 적합)
** BLE는 저전력으로 동작하며, 주로 가까운 거리에서 데이터를 주고받는 데 사용됩니다. 최신 BLE 버전에서는 최대 100m까지 전송이 가능하지만, 실제로는 장애물 및 환경에 따라 더 짧아질 수 있습니다.
2. **WiFi**
** **전송 거리**: 약 50m ~ 100m (실내), 250m ~ 300m (실외)(중거리 통신, 실내에서 주로 사용)
** WiFi는 상대적으로 빠른 데이터 전송 속도를 지원하지만, 전력 소모가 큽니다. WiFi 6과 같은 최신 기술을 사용하면 실외에서 더 긴 거리를 지원할 수 있지만, 일반적으로 실내에서 약 50m 정도의 범위를 지원합니다.
3. **LoRaWAN**
** **전송 거리**: 약 3km ~ 15km(장거리 통신, 저전력 IoT 솔루션에 적합)
** LoRaWAN은 저전력, 장거리 통신을 목적으로 설계되어, 도시에서는 약 3~5km, 농촌 지역에서는 최대 15km까지 통신할 수 있습니다. 이 기술은 주로 IoT 장치가 넓은 범위에서 데이터를 전송할 때 유용합니다.
4. **LTE (Long-Term Evolution)**
** **전송 거리**: 약 5km ~ 30km (장거리 고속 통신)
** LTE는 모바일 네트워크에서 사용되는 기술로, 고속 데이터 전송이 가능하며, 넓은 범위에서 안정적인 통신을 제공합니다. 전송 거리는 기지국 밀도와 환경에 따라 다르지만, 일반적으로 농촌 지역에서는 최대 30km까지 도달할 수 있습니다.

=== 2.5 전력 소모 (Power Consumption)

LoRaWAN은 Class A, B, C 세 가지 장치 클래스를 지원하여 전력 소모를 관리합니다

* **Class A**: 양방향 통신을 지원하며, 가장 낮은 전력 소모를 보장합니다. 주기적으로 데이터를 전송하며, 이후 짧은 수신 시간을 가집니다.
* **Class B**: Class A의 특성에 추가로 동기화된 수신 슬롯을 가지고 있어 더 자주 데이터를 수신할 수 있습니다.
* **Class C**: 항상 수신 모드로 유지되어, 가장 많은 전력을 소비하지만, 즉각적인 데이터 수신이 가능합니다​.

=== 2.6 보안 (Security)

LoRaWAN은 AES-128 대칭키 암호화를 사용하여 보안을 보장합니다. 각 데이터 패킷은 두 개의 키로 보호됩니다:

* Network Session Key (NwkSKey): 네트워크 서버와 장치 간의 통신을 보호합니다.
* Application Session Key (AppSKey): 애플리케이션 서버와 장치 간의 통신을 보호합니다. 이는 네트워크와 애플리케이션 사이의 데이터가 안전하게 전송되도록 보장합니다​.

== 3. LoRaWAN의 주요 구성 요소

LoRaWAN은 주로 **엔드 디바이스(End Device)**, **게이트웨이(Gateway)**, **네트워크 서버(Network Server)**, 그리고 **애플리케이션 서버(Application Server)**로 구성됩니다.

=== 3.1 **엔드 디바이스 (End Device)**
* 엔드 디바이스는 IoT 네트워크의 실제 센서나 장치로, 데이터를 수집하고 이를 전송하는 역할을 합니다.
** 예를 들어, 온도 센서, 습도 센서, 움직임 감지 센서 등이 여기에 해당합니다.
* 엔드 디바이스는 주로 배터리로 작동되며, 전력 소모를 최소화하면서 데이터를 주기적으로 또는 이벤트 기반으로 전송합니다.
* 엔드 디바이스는 LoRa 무선 신호를 사용해 **게이트웨이**로 데이터를 전송합니다.

=== 3.2 **게이트웨이 (Gateway)**
* 게이트웨이는 엔드 디바이스와 네트워크 서버 간의 중계 장치입니다.
** 여러 엔드 디바이스에서 송신된 데이터를 수집하여 네트워크 서버로 전달하는 역할을 합니다.
* 게이트웨이는 엔드 디바이스의 신호를 수신한 후, 인터넷 연결(Wi-Fi, 이더넷, 셀룰러 네트워크 등)을 통해 네트워크 서버로 데이터를 전송합니다.
* LoRaWAN에서는 게이트웨이가 여러 개의 엔드 디바이스와 통신할 수 있으며, 단일 게이트웨이가 광범위한 지역에 있는 여러 센서의 데이터를 수집할 수 있습니다.

=== 3.3 **네트워크 서버 (Network Server)**
* 네트워크 서버는 게이트웨이에서 전송된 데이터를 처리하고 관리하는 중심 서버입니다.
* 네트워크 서버는 **중복 메시지 제거**, **데이터 검증**, **엔드 디바이스 인증** 등을 담당하며, 이를 통해 네트워크의 안전성을 유지합니다.
* 네트워크 서버는 데이터를 처리한 후 애플리케이션 서버로 전송하여, 실제 애플리케이션에서 데이터를 사용할 수 있게 합니다.

=== 3.4 **애플리케이션 서버 (Application Server)**
* 애플리케이션 서버는 최종적으로 데이터를 처리하고 활용하는 단계입니다.
* 데이터를 저장하거나 분석, 시각화하는 작업을 수행합니다.
** 예를 들어, 온도 데이터를 기반으로 알림을 설정하거나, 특정 조건에 맞는 자동화된 작업을 수행할 수 있습니다.

---

== 4. LoRaWAN의 작동 방식

LoRaWAN은 **엔드 디바이스 → 게이트웨이 → 네트워크 서버 → 애플리케이션 서버**의 단계로 데이터를 처리합니다.

아래는 이 과정의 기본적인 흐름입니다:

1. **데이터 수집**: 엔드 디바이스(센서)는 주변 환경에서 데이터를 수집합니다. 예를 들어, 온도 센서가 실시간으로 온도 데이터를 측정합니다.

2. **데이터 전송**: LoRa 기술을 사용해 엔드 디바이스는 LoRa 신호로 게이트웨이로 데이터를 전송합니다. 엔드 디바이스는 매우 적은 전력으로 긴 거리의 데이터를 전송할 수 있습니다.

3. **게이트웨이 수신 및 전송**: 게이트웨이는 엔드 디바이스로부터 데이터를 수신하고, 이를 인터넷을 통해 네트워크 서버로 전송합니다. 게이트웨이는 수신된 데이터를 단순히 중계하는 역할을 합니다.

4. **네트워크 서버 처리**: 네트워크 서버는 게이트웨이로부터 데이터를 받아 중복된 데이터를 제거하고, 메시지를 확인한 뒤, 애플리케이션 서버로 데이터를 전달합니다.

5. **데이터 활용**: 애플리케이션 서버는 데이터를 처리하고 분석하여, 사용자가 필요로 하는 정보로 변환합니다. 예를 들어, 온도 데이터를 모니터링하고 특정 임계값에 도달했을 때 알림을 보내는 작업을 수행할 수 있습니다.

== 5. LoRaWAN의 활용 사례

1. **스마트 농업**
* LoRaWAN을 사용해 농장의 온도, 습도, 토양 상태를 모니터링하고 자동으로 관개 시스템을 제어하는 데 사용됩니다. 센서에서 수집된 데이터를 통해 농작물의 생육 상태를 실시간으로 모니터링할 수 있습니다.

2. **스마트 시티**
* 스마트 시티에서 LoRaWAN은 공공 시설 모니터링(예: 가로등, 쓰레기통 관리), 주차 관리, 대기질 모니터링 등에 활용됩니다. 넓은 도심 지역에서 센서가 데이터를 지속적으로 수집하고 관리 서버로 전송하여 효율적인 도시 관리를 가능하게 합니다.

3. **산업 IoT**
* LoRaWAN은 제조업이나 에너지 관리 시스템에서 장비 상태 모니터링, 원격 유지 보수, 자산 관리 등에 사용됩니다. 예를 들어, 원격 공장에 있는 장비의 상태를 지속적으로 모니터링하고 이상이 발생하면 즉각적으로 알림을 받을 수 있습니다.

4. **환경 모니터링**
* LoRaWAN은 산림, 하천, 공기질 모니터링 등과 같은 환경 모니터링 시스템에 사용됩니다. 광범위한 자연환경에서 센서가 데이터를 수집하여 중앙 서버로 전송하고, 환경 상태를 실시간으로 파악할 수 있습니다.

---

== 6. 정리

* LoRaWAN은 **장거리 통신**과 **저전력 소모**를 기반으로 한 IoT 네트워크 기술로, 넓은 지역에 걸쳐 배치된 IoT 장치들 간의 통신을 가능하게 합니다.
* 다양한 센서와 장치가 배터리 전력으로 장기간 동작할 수 있으며, 게이트웨이와 서버를 통해 데이터를 수집하고 처리하여 효율적인 IoT 네트워크를 구축할 수 있습니다.
* LoRaWAN은 특히 스마트 농업, 스마트 시티, 산업 IoT 등에서 중요한 역할을 수행하며, 대규모 IoT 시스템에서 필수적인 통신 기술로 자리 잡고 있습니다.



---

[cols="1a,1a,1a",grid=none,frame=none]
|===
<s|
^s|link:../../../README.md[목차]
>s|
|===